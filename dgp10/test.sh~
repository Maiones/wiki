#!/bin/bash

test_p="/tmp/failed_ping_test.txt"
echo "" > $test_p

HOSTS="
10.14.198.109
10.14.198.107
10.14.198.106
10.14.198.105
10.14.198.104
10.14.198.103
10.14.198.102
10.4.106.42
10.4.106.35
10.4.106.72
10.4.106.32
10.4.106.88
10.4.106.33
10.4.106.45
10.4.106.4
10.4.106.43
10.4.106.49
10.4.106.77
10.4.106.25
10.4.106.13
10.4.106.38
10.4.106.110
10.4.106.101
10.4.106.125
10.4.106.48
10.4.106.93
10.4.106.34
10.4.106.36
10.4.106.58
10.4.106.26
10.4.106.28
10.4.106.41
10.4.106.37
10.4.106.60
10.4.106.21
10.4.106.46
10.4.106.61
10.4.106.47
10.4.106.18
10.4.106.122
10.4.106.71
10.4.106.62
10.4.106.44
10.4.106.7
10.4.106.117
10.4.106.65
10.4.106.80
10.4.106.111
10.4.106.16
10.4.106.73
10.4.106.63
10.4.106.109
10.4.106.66
10.4.106.123
10.4.106.3
10.4.106.115
10.4.106.5
10.4.106.94
10.4.106.67
10.4.106.92
10.4.106.74
10.4.106.105
10.4.106.106
10.4.106.12
10.4.106.124
10.4.106.118
10.4.106.14
10.4.106.17
10.4.106.119
10.4.106.82
10.4.106.19
10.4.106.30
10.4.106.120
10.4.106.11
10.4.106.68
10.4.106.102

"
for i in $HOSTS
do

ping -c 3 $i > /dev/null 2>&1
if [ $? != 0 ]; then
	echo "$i is DOWN" >> $test_p
	else 
	echo "$i is UP" >> $test_p
fi

ssh -o "StrictHostKeyChecking=no" -i /home/user/key/medkey root@$i 'bash -s' < /home/user/kva-kva/scripts/dgp10/kasper_.sh

done
